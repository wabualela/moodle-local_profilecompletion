define("local_profilecompletion/prompt",["exports","core_form/modalform","core/toast"],(function(_exports,_modalform,Toast){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform);let handlerBound=!1,activeConfig=null;const escapeHtml=value=>{const el=document.createElement("div");return el.textContent=value,el.innerHTML},getToastMessage=config=>"<div>"+escapeHtml(config.toastbody||"")+"</div><div class=\"mt-2\"><button type=\"button\" class=\"btn btn-primary btn-sm local-profilecompletion-toast-action\">"+escapeHtml(config.buttontext||"")+"</button></div>",openModal=(config,returnFocus=null)=>{const modalForm=new _modalform.default({modalConfig:{title:config.modaltitle,large:!0,isVerticallyCentered:!0},formClass:config.formclass,saveButtonText:config.savebuttontext,returnFocus:returnFocus||document.body});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{window.location.reload()})),modalForm.show()},init=config=>{config&&(activeConfig=config,handlerBound||(document.addEventListener("click",(e=>{const trigger=e.target.closest(".local-profilecompletion-toast-action");trigger&&activeConfig&&(e.preventDefault(),openModal(activeConfig,trigger))})),handlerBound=!0),Toast.add(getToastMessage(config),{title:escapeHtml(config.toasttitle||""),type:"warning",autohide:!0,delay:Number(config.toastdelay)||6e3,closeButton:!0}))};_exports.init=init}));
//# sourceMappingURL=prompt.min.js.map
